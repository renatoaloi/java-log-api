// package com.desafio.logdemo.batch;

// import com.desafio.logdemo.model.Log;

// import org.springframework.batch.core.configuration.annotation.EnableBatchProcessing;
// import org.springframework.batch.core.configuration.annotation.JobBuilderFactory;
// import org.springframework.batch.core.configuration.annotation.StepBuilderFactory;
// import org.springframework.batch.item.file.builder.FlatFileItemReaderBuilder;
// import org.springframework.batch.item.file.mapping.BeanWrapperFieldSetMapper;
// import org.springframework.batch.item.file.mapping.DefaultLineMapper;
// import org.springframework.batch.item.file.transform.DelimitedLineTokenizer;
// import org.springframework.batch.item.file.FlatFileItemReader;
// import org.springframework.batch.item.file.LineMapper;
// import org.springframework.beans.factory.annotation.Autowired;
// import org.springframework.context.annotation.Bean;
// import org.springframework.context.annotation.Configuration;
// import org.springframework.core.io.ClassPathResource;

// @Configuration
// @EnableBatchProcessing
// public class BatchConfiguration {

//     @Autowired
//     public JobBuilderFactory jobBuilderFactory;

//     @Autowired
//     public StepBuilderFactory stepBuilderFactory;

//     @Bean
//     public FlatFileItemReader<Log> reader() {
//         return new FlatFileItemReaderBuilder<Log>()
//             .name("logItemReader")
//             .resource(new ClassPathResource("teste.csv"))
//             .delimited()
//             .names(new String[] { "entryDate", "ipAddress", "httpMethod", "returnCode", "browserDetail" })
//             //.lineMapper(lineMapper())
//             .fieldSetMapper(new BeanWrapperFieldSetMapper<Log>(){
//                 {
//                     setTargetType(Log.class);
//                 }
//             })
//             .build();
//     }

//     @Bean
//     public LineMapper<Log> lineMapper() {
//         final DefaultLineMapper<Log> defaultLineMapper = new DefaultLineMapper<>();
//         final DelimitedLineTokenizer lineTokenizer = new DelimitedLineTokenizer();
//         lineTokenizer.setDelimiter("|");
//         lineTokenizer.setQuoteCharacter('"');
//         lineTokenizer.setStrict(false);
//         lineTokenizer.setNames(new String[] { "entryDate", "ipAddress", "httpMethod", "returnCode", "browserDetail" });
        
//         final LogFieldSetMapper logFieldSetMapper = new LogFieldSetMapper();
//         defaultLineMapper.setLineTokenizer(lineTokenizer);
//         defaultLineMapper.setFieldSetMapper(logFieldSetMapper);

//         return defaultLineMapper;
//     }

//     // @Bean
//     // public LogProcessor processor() {
//     //     return new LogProcessor();
//     // }
    
// }